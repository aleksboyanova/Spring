<html xmlns:th="http://www.w3.org/1999/xhtml">
<head th:replace="fragments/header :: header" />
<body>
<nav th:replace="fragments/menu :: menu" />
<div class="container">
  <div class="row mt-3">
    <div class="col">
      <h3>Listings</h3>
    </div>
  </div>

  <div class="row mt-3">
    <div th:if="${success != null}" class="alert alert-success">
      <span th:text="${success}" />
    </div>
    <div class="col">
      <h3 th:text="${listing.title}" />
      <div th:text="${listing.description}" />
    </div>
  </div>
  <div class="container mt-5">
    <div class="d-flex justify-content-center row">
      <div class="col-md-8">
        <div  class="d-flex flex-column comment-section">
          <!-- Comment Box -->
          <div th:each="comment: ${comments}" class="bg-white p-2">
            <div class="d-flex flex-row user-info">
              <div class="d-flex flex-column justify-content-start ml-2">
                <span th:text="${comment.publisher.username}" class="d-block font-weight-bold name" />
              </div>
            </div>
            <div class="mt-2">
              <p class="comment-text" th:text="${comment.text}" />
            </div>
            <hr>
          </div>
          <!-- Comment Box  End -->
          <div th:if="${!isLogged}">
            <a href="/login">Login to comment</a>
          </div>
          <div th:if="${isLogged}" class="bg-light p-2">
            <form method="POST">
              <div class="d-flex flex-row align-items-start">
                <textarea name="text" class="form-control ml-1 shadow-none textarea"></textarea>
              </div>
              <div class="mt-2 text-right">
                <button class="btn btn-primary btn-sm shadow-none" type="submit">Post</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</body>
</html>